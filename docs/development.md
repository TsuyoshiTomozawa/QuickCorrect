# QuickCorrect Development Guide\n\n## 🚀 Quick Setup\n\n### Prerequisites\n- Node.js 18+ (推奨: 20.x)\n- npm 9+ または yarn 3+\n- Git\n\n### Installation\n\n```bash\n# Clone the repository\ngit clone https://github.com/TsuyoshiTomozawa/QuickCorrect.git\ncd QuickCorrect\n\n# Install dependencies\nnpm install\n\n# Set up environment variables\ncp .env.example .env\n# Edit .env file to add your API keys\n```\n\n### Environment Setup\n\nCreate a `.env` file in the root directory:\n\n```env\n# OpenAI API Configuration\nOPENAI_API_KEY=your_openai_api_key_here\n\n# Anthropic Claude API Configuration (optional)\nANTHROPIC_API_KEY=your_anthropic_api_key_here\n\n# Google Gemini API Configuration (optional)\nGOOGLE_API_KEY=your_google_api_key_here\n\n# Development settings\nNODE_ENV=development\nDEBUG=true\n```\n\n## 🔧 Development\n\n### Starting Development Server\n\n```bash\n# Start both renderer and main processes\nnpm run dev\n\n# Or start individually\nnpm run dev:renderer  # React development server\nnpm run dev:main      # Electron main process (watch mode)\n```\n\n### Building for Production\n\n```bash\n# Build all components\nnpm run build\n\n# Build individually\nnpm run build:renderer\nnpm run build:main\n\n# Create distributable packages\nnpm run pack    # Create unpacked directory\nnpm run dist    # Create installer packages\n```\n\n### Testing\n\n```bash\n# Run all tests\nnpm test\n\n# Run tests in watch mode\nnpm run test:watch\n\n# Run tests with coverage\nnpm run test:coverage\n```\n\n### Code Quality\n\n```bash\n# Lint code\nnpm run lint\n\n# Format code\nnpm run format\n\n# Type checking\nnpm run type-check\n```\n\n## 📁 Project Structure\n\n```\nQuickCorrect/\n├── src/\n│   ├── main/                   # Electron main process\n│   │   ├── main.ts            # Main entry point\n│   │   └── preload.ts         # Preload script\n│   ├── renderer/              # React frontend\n│   │   ├── App.tsx            # Main React component\n│   │   ├── components/        # UI components\n│   │   ├── hooks/             # Custom React hooks\n│   │   ├── styles/            # Styled components & themes\n│   │   └── utils/             # Frontend utilities\n│   ├── controllers/           # Business logic controllers\n│   │   ├── HotkeyController.ts\n│   │   ├── CorrectionController.ts\n│   │   └── ClipboardController.ts\n│   ├── models/                # Data models & AI integration\n│   │   ├── CorrectionModel.ts\n│   │   ├── HistoryModel.ts\n│   │   └── SettingsModel.ts\n│   └── types/                 # TypeScript type definitions\n│       └── interfaces.ts\n├── docs/                      # Documentation\n├── tests/                     # Test files\n├── assets/                    # Static assets (icons, etc.)\n├── build/                     # Build configuration\n└── release/                   # Distribution packages\n```\n\n## 🏗️ Architecture Overview\n\n### MVC Pattern\n\n**Model (データ層)**:\n- `CorrectionModel`: AI API統合とテキスト処理\n- `HistoryModel`: 履歴データの管理\n- `SettingsModel`: アプリケーション設定\n\n**View (UI層)**:\n- React components in `src/renderer/components/`\n- Styled-components for styling\n- Framer Motion for animations\n\n**Controller (制御層)**:\n- `HotkeyController`: グローバルホットキー管理\n- `CorrectionController`: 添削フロー制御\n- `ClipboardController`: クリップボード操作\n\n### Electron Architecture\n\n```\n┌─────────────────┐    ┌─────────────────┐\n│   Main Process  │    │ Renderer Process│\n│                 │    │                 │\n│ • Window mgmt   │◄──►│ • React UI      │\n│ • Global hotkey │ IPC│ • User interaction│\n│ • File system   │    │ • State mgmt    │\n│ • AI API calls  │    │                 │\n└─────────────────┘    └─────────────────┘\n          │\n          ▼\n┌─────────────────┐\n│   Controllers   │\n│                 │\n│ • Business logic│\n│ • Data processing│\n│ • External APIs │\n└─────────────────┘\n```\n\n## 🔌 API Integration\n\n### Adding New AI Providers\n\n1. Create provider class in `src/models/providers/`:\n\n```typescript\nexport class NewAIProvider implements AIProvider {\n  async correctText(text: string, mode: CorrectionMode): Promise<CorrectionResult> {\n    // Implementation\n  }\n}\n```\n\n2. Register in `CorrectionController`:\n\n```typescript\nthis.providers.set('newai', new NewAIProvider());\n```\n\n3. Add configuration to settings UI\n\n### Error Handling\n\n```typescript\ntry {\n  const result = await aiProvider.correctText(text, mode);\n  return result;\n} catch (error) {\n  if (error instanceof APIError) {\n    // Handle API-specific errors\n  } else if (error instanceof NetworkError) {\n    // Handle network errors\n  } else {\n    // Handle unexpected errors\n  }\n  throw new CorrectionError('Failed to correct text', error);\n}\n```\n\n## 🧪 Testing Strategy\n\n### Unit Tests\n- Controllers: Business logic testing\n- Models: Data processing and API integration\n- Components: React component testing with React Testing Library\n\n### Integration Tests\n- IPC communication between main and renderer\n- End-to-end correction workflow\n- Hotkey functionality\n\n### E2E Tests\n- Complete user workflows\n- Cross-platform compatibility\n- Performance testing\n\n### Test Files Structure\n\n```\ntests/\n├── unit/\n│   ├── controllers/\n│   ├── models/\n│   └── components/\n├── integration/\n│   ├── ipc/\n│   └── workflow/\n└── e2e/\n    ├── user-flows/\n    └── performance/\n```\n\n## 🚀 Deployment\n\n### Platform-Specific Builds\n\n```bash\n# Windows\nnpm run build:win\n\n# macOS\nnpm run build:mac\n\n# Linux\nnpm run build:linux\n\n# All platforms\nnpm run build:all\n```\n\n### Code Signing (Production)\n\n1. **Windows**: Authenticode certificate\n2. **macOS**: Apple Developer certificate\n3. **Linux**: GPG signing\n\n### Distribution\n\n- **Windows**: NSIS installer (.exe)\n- **macOS**: DMG package (.dmg)\n- **Linux**: AppImage (.AppImage)\n\n## 📝 Contributing\n\n### Git Workflow\n\n1. Create feature branch from `main`:\n   ```bash\n   git checkout -b feature/your-feature-name\n   ```\n\n2. Make changes and commit:\n   ```bash\n   git add .\n   git commit -m \"feat: add your feature description\"\n   ```\n\n3. Push and create PR:\n   ```bash\n   git push origin feature/your-feature-name\n   ```\n\n### Commit Convention\n\n```\nfeat: new feature\nfix: bug fix\ndocs: documentation\nstyle: formatting\nrefactor: code restructuring\ntest: adding tests\nchore: maintenance\n```\n\n### Code Style\n\n- TypeScript strict mode\n- ESLint + Prettier\n- 2-space indentation\n- Semi-colons required\n- Single quotes for strings\n\n## 🐛 Debugging\n\n### Development Tools\n\n```bash\n# Enable debug mode\nDEBUG=quickcorrect:* npm run dev\n\n# Open DevTools\n# Press F12 in the app window\n```\n\n### Logging\n\n```typescript\nimport { logger } from '../utils/logger';\n\nlogger.info('User action', { action: 'correct-text', length: text.length });\nlogger.error('API error', { provider: 'openai', error: error.message });\n```\n\n### Common Issues\n\n1. **Global hotkey not working**:\n   - Check accessibility permissions on macOS\n   - Verify no conflicts with other apps\n\n2. **AI API errors**:\n   - Verify API keys in `.env`\n   - Check rate limits\n   - Monitor network connectivity\n\n3. **Build failures**:\n   - Clear `node_modules` and reinstall\n   - Check Node.js version compatibility\n   - Verify build dependencies\n\n## 📊 Performance Monitoring\n\n### Metrics to Track\n\n- App startup time\n- Hotkey response time\n- AI API response time\n- Memory usage\n- CPU usage\n\n### Performance Tools\n\n```bash\n# Profile startup time\nnpm run profile:startup\n\n# Monitor memory usage\nnpm run profile:memory\n\n# Analyze bundle size\nnpm run analyze:bundle\n```\n\n## 🔒 Security\n\n### API Key Management\n\n- Store encrypted in electron-store\n- Never log API keys\n- Validate on app startup\n\n### Data Privacy\n\n- No text data sent except to AI APIs\n- Local SQLite database encryption\n- User consent for data collection\n\n### Security Checklist\n\n- [ ] Content Security Policy (CSP)\n- [ ] Node integration disabled in renderer\n- [ ] Context isolation enabled\n- [ ] Input validation\n- [ ] Secure IPC communication\n\n---\n\n## 🆘 Getting Help\n\n- **Issues**: [GitHub Issues](https://github.com/TsuyoshiTomozawa/QuickCorrect/issues)\n- **Discussions**: [GitHub Discussions](https://github.com/TsuyoshiTomozawa/QuickCorrect/discussions)\n- **Documentation**: [Project Wiki](https://github.com/TsuyoshiTomozawa/QuickCorrect/wiki)\n\nHappy coding! 🎯